<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
    <style type="text/css">
        html, body {
        height: 100%;
        margin: 0;
        }
    </style>
    <script type="text/javascript"
            src="https://maps.googleapis.com/maps/api/js?libraries=geometry,visualization&key=AIzaSyBQEhLRcmIWW01leXaylofxgG8TEOYa0KU&sensor=false">
    </script>
    <!--<script
            src="http://maps.googleapis.com/maps/api/js?libraries=geometry,visualization&sensor=false">
    </script>-->
    <script type="text/javascript">
        var map;

        function initialize() {
            var mapOptions = {
            zoom: 3,
            center: new google.maps.LatLng(39.5, -30.5),
            mapTypeId: google.maps.MapTypeId.TERRAIN
        };

        map = new google.maps.Map(document.getElementById('map-canvas'),
        mapOptions);

        // Create a script tag and set the USGS URL as the source.
        var script = document.createElement('script');
        script.src = 'http://earthquake.usgs.gov/earthquakes/feed/geojsonp/2.5/week';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(script, s);
        }

        window.eqfeed_callback_ = function(results) {
            for (var i = 0; i < results.features.length; i++) {
                var coords = results.features[i].geometry.coordinates;
                var latLng = new google.maps.LatLng(coords[1], coords[0]);
                var marker = new google.maps.Marker({
                    position: latLng,
                    map: map,
                    icon: getCircle(results.features[i].properties.mag)
        });
            }
        }

        function getCircle(magnitude) {
            return {
                path: google.maps.SymbolPath.CIRCLE,
                fillColor: 'red',
                fillOpacity: .2,
                scale: Math.pow(2, magnitude) / Math.PI,
                strokeColor: 'white',
                strokeWeight: .5
            };
        }

        window.eqfeed_callback = function(results) {
            var heatmapData = [];
            for (var i = 0; i < results.features.length; i++) {
                var coords = results.features[i].geometry.coordinates;
                var latLng = new google.maps.LatLng(coords[1], coords[0]);
                heatmapData.push(latLng);
            }
            var heatmap = new google.maps.visualization.HeatmapLayer({
                data: heatmapData,
                dissipating: false,
                map: map
            });
        }



    </script>
</head>
<body onload="initialize()">
<div id="map-canvas" style="min-height: 100%;"></div>
</body>
</html>